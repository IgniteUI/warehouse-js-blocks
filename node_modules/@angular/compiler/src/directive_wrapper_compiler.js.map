{"version":3,"file":"directive_wrapper_compiler.js","sourceRoot":"","sources":["../../../../modules/@angular/compiler/src/directive_wrapper_compiler.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable} from '@angular/core';\n\nimport {CompileDirectiveMetadata, CompileIdentifierMetadata} from './compile_metadata';\nimport {createCheckBindingField, createCheckBindingStmt} from './compiler_util/binding_util';\nimport {convertPropertyBinding} from './compiler_util/expression_converter';\nimport {writeToRenderer} from './compiler_util/render_util';\nimport {CompilerConfig} from './config';\nimport {Parser} from './expression_parser/parser';\nimport {Identifiers, resolveIdentifier} from './identifiers';\nimport {DEFAULT_INTERPOLATION_CONFIG} from './ml_parser/interpolation_config';\nimport {ClassBuilder, createClassStmt} from './output/class_builder';\nimport * as o from './output/output_ast';\nimport {ParseError, ParseErrorLevel, ParseLocation, ParseSourceFile, ParseSourceSpan} from './parse_util';\nimport {Console, LifecycleHooks, isDefaultChangeDetectionStrategy} from './private_import_core';\nimport {ElementSchemaRegistry} from './schema/element_schema_registry';\nimport {BindingParser} from './template_parser/binding_parser';\nimport {BoundElementPropertyAst, BoundEventAst} from './template_parser/template_ast';\n\nexport class DirectiveWrapperCompileResult {\n  constructor(public statements: o.Statement[], public dirWrapperClassVar: string) {}\n}\n\nconst CONTEXT_FIELD_NAME = 'context';\nconst CHANGES_FIELD_NAME = 'changes';\nconst CHANGED_FIELD_NAME = 'changed';\n\nconst CURR_VALUE_VAR = o.variable('currValue');\nconst THROW_ON_CHANGE_VAR = o.variable('throwOnChange');\nconst FORCE_UPDATE_VAR = o.variable('forceUpdate');\nconst VIEW_VAR = o.variable('view');\nconst RENDER_EL_VAR = o.variable('el');\n\nconst RESET_CHANGES_STMT = o.THIS_EXPR.prop(CHANGES_FIELD_NAME).set(o.literalMap([])).toStmt();\n\n/**\n * We generate directive wrappers to prevent code bloat when a directive is used.\n * A directive wrapper encapsulates\n * the dirty checking for `@Input`, the handling of `@HostListener` / `@HostBinding`\n * and calling the lifecyclehooks `ngOnInit`, `ngOnChanges`, `ngDoCheck`.\n *\n * So far, only `@Input` and the lifecycle hooks have been implemented.\n */\n\nexport class DirectiveWrapperCompiler {\n  static dirWrapperClassName(id: CompileIdentifierMetadata) { return `Wrapper_${id.name}`; }\n\n  constructor(\n      private compilerConfig: CompilerConfig, private _exprParser: Parser,\n      private _schemaRegistry: ElementSchemaRegistry, private _console: Console) {}\n\n  compile(dirMeta: CompileDirectiveMetadata): DirectiveWrapperCompileResult {\n    const builder = new DirectiveWrapperBuilder(this.compilerConfig, dirMeta);\n    Object.keys(dirMeta.inputs).forEach((inputFieldName) => {\n      addCheckInputMethod(inputFieldName, builder);\n    });\n    addDetectChangesInInputPropsMethod(builder);\n\n    const hostParseResult = parseHostBindings(dirMeta, this._exprParser, this._schemaRegistry);\n    reportParseErrors(hostParseResult.errors, this._console);\n    // host properties are change detected by the DirectiveWrappers,\n    // except for the animation properties as they need close integration with animation events\n    // and DirectiveWrappers don't support\n    // event listeners right now.\n    addDetectChangesInHostPropsMethod(\n        hostParseResult.hostProps.filter(hostProp => !hostProp.isAnimation), builder);\n\n    // TODO(tbosch): implement hostListeners via DirectiveWrapper as well!\n\n    const classStmt = builder.build();\n    return new DirectiveWrapperCompileResult([classStmt], classStmt.name);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: ({type: any, decorators?: DecoratorInvocation[]}|null)[] = [\n{type: CompilerConfig, },\n{type: Parser, },\n{type: ElementSchemaRegistry, },\n{type: Console, },\n];\n}\n\nclass DirectiveWrapperBuilder implements ClassBuilder {\n  fields: o.ClassField[] = [];\n  getters: o.ClassGetter[] = [];\n  methods: o.ClassMethod[] = [];\n  ctorStmts: o.Statement[] = [];\n\n  genChanges: boolean;\n  ngOnChanges: boolean;\n  ngOnInit: boolean;\n  ngDoCheck: boolean;\n\n  constructor(public compilerConfig: CompilerConfig, public dirMeta: CompileDirectiveMetadata) {\n    const dirLifecycleHooks = dirMeta.type.lifecycleHooks;\n    this.genChanges = dirLifecycleHooks.indexOf(LifecycleHooks.OnChanges) !== -1 ||\n        this.compilerConfig.logBindingUpdate;\n    this.ngOnChanges = dirLifecycleHooks.indexOf(LifecycleHooks.OnChanges) !== -1;\n    this.ngOnInit = dirLifecycleHooks.indexOf(LifecycleHooks.OnInit) !== -1;\n    this.ngDoCheck = dirLifecycleHooks.indexOf(LifecycleHooks.DoCheck) !== -1;\n  }\n\n  build(): o.ClassStmt {\n    const dirDepParamNames: string[] = [];\n    for (let i = 0; i < this.dirMeta.type.diDeps.length; i++) {\n      dirDepParamNames.push(`p${i}`);\n    }\n\n    const fields: o.ClassField[] = [\n      new o.ClassField(CONTEXT_FIELD_NAME, o.importType(this.dirMeta.type)),\n      new o.ClassField(CHANGED_FIELD_NAME, o.BOOL_TYPE),\n    ];\n    const ctorStmts: o.Statement[] =\n        [o.THIS_EXPR.prop(CHANGED_FIELD_NAME).set(o.literal(false)).toStmt()];\n    if (this.genChanges) {\n      fields.push(new o.ClassField(CHANGES_FIELD_NAME, new o.MapType(o.DYNAMIC_TYPE)));\n      ctorStmts.push(RESET_CHANGES_STMT);\n    }\n\n    ctorStmts.push(\n        o.THIS_EXPR.prop(CONTEXT_FIELD_NAME)\n            .set(o.importExpr(this.dirMeta.type)\n                     .instantiate(dirDepParamNames.map((paramName) => o.variable(paramName))))\n            .toStmt());\n\n    return createClassStmt({\n      name: DirectiveWrapperCompiler.dirWrapperClassName(this.dirMeta.type),\n      ctorParams: dirDepParamNames.map((paramName) => new o.FnParam(paramName, o.DYNAMIC_TYPE)),\n      builders: [{fields, ctorStmts}, this]\n    });\n  }\n}\n\nfunction addDetectChangesInInputPropsMethod(builder: DirectiveWrapperBuilder) {\n  const changedVar = o.variable('changed');\n  const stmts: o.Statement[] = [\n    changedVar.set(o.THIS_EXPR.prop(CHANGED_FIELD_NAME)).toDeclStmt(),\n    o.THIS_EXPR.prop(CHANGED_FIELD_NAME).set(o.literal(false)).toStmt(),\n  ];\n  const lifecycleStmts: o.Statement[] = [];\n\n  if (builder.genChanges) {\n    const onChangesStmts: o.Statement[] = [];\n    if (builder.ngOnChanges) {\n      onChangesStmts.push(o.THIS_EXPR.prop(CONTEXT_FIELD_NAME)\n                              .callMethod('ngOnChanges', [o.THIS_EXPR.prop(CHANGES_FIELD_NAME)])\n                              .toStmt());\n    }\n    if (builder.compilerConfig.logBindingUpdate) {\n      onChangesStmts.push(\n          o.importExpr(resolveIdentifier(Identifiers.setBindingDebugInfoForChanges))\n              .callFn(\n                  [VIEW_VAR.prop('renderer'), RENDER_EL_VAR, o.THIS_EXPR.prop(CHANGES_FIELD_NAME)])\n              .toStmt());\n    }\n    onChangesStmts.push(RESET_CHANGES_STMT);\n    lifecycleStmts.push(new o.IfStmt(changedVar, onChangesStmts));\n  }\n\n  if (builder.ngOnInit) {\n    lifecycleStmts.push(new o.IfStmt(\n        VIEW_VAR.prop('numberOfChecks').identical(new o.LiteralExpr(0)),\n        [o.THIS_EXPR.prop(CONTEXT_FIELD_NAME).callMethod('ngOnInit', []).toStmt()]));\n  }\n  if (builder.ngDoCheck) {\n    lifecycleStmts.push(o.THIS_EXPR.prop(CONTEXT_FIELD_NAME).callMethod('ngDoCheck', []).toStmt());\n  }\n  if (lifecycleStmts.length > 0) {\n    stmts.push(new o.IfStmt(o.not(THROW_ON_CHANGE_VAR), lifecycleStmts));\n  }\n  stmts.push(new o.ReturnStatement(changedVar));\n\n  builder.methods.push(new o.ClassMethod(\n      'detectChangesInInputProps',\n      [\n        new o.FnParam(\n            VIEW_VAR.name, o.importType(resolveIdentifier(Identifiers.AppView), [o.DYNAMIC_TYPE])),\n        new o.FnParam(RENDER_EL_VAR.name, o.DYNAMIC_TYPE),\n        new o.FnParam(THROW_ON_CHANGE_VAR.name, o.BOOL_TYPE),\n      ],\n      stmts, o.BOOL_TYPE));\n}\n\nfunction addCheckInputMethod(input: string, builder: DirectiveWrapperBuilder) {\n  const field = createCheckBindingField(builder);\n  var onChangeStatements: o.Statement[] = [\n    o.THIS_EXPR.prop(CHANGED_FIELD_NAME).set(o.literal(true)).toStmt(),\n    o.THIS_EXPR.prop(CONTEXT_FIELD_NAME).prop(input).set(CURR_VALUE_VAR).toStmt(),\n  ];\n  if (builder.genChanges) {\n    onChangeStatements.push(o.THIS_EXPR.prop(CHANGES_FIELD_NAME)\n                                .key(o.literal(input))\n                                .set(o.importExpr(resolveIdentifier(Identifiers.SimpleChange))\n                                         .instantiate([field.expression, CURR_VALUE_VAR]))\n                                .toStmt());\n  }\n\n  var methodBody: o.Statement[] = createCheckBindingStmt(\n      {currValExpr: CURR_VALUE_VAR, forceUpdate: FORCE_UPDATE_VAR, stmts: []}, field.expression,\n      THROW_ON_CHANGE_VAR, onChangeStatements);\n  builder.methods.push(new o.ClassMethod(\n      `check_${input}`,\n      [\n        new o.FnParam(CURR_VALUE_VAR.name, o.DYNAMIC_TYPE),\n        new o.FnParam(THROW_ON_CHANGE_VAR.name, o.BOOL_TYPE),\n        new o.FnParam(FORCE_UPDATE_VAR.name, o.BOOL_TYPE),\n      ],\n      methodBody));\n}\n\nfunction addDetectChangesInHostPropsMethod(\n    hostProps: BoundElementPropertyAst[], builder: DirectiveWrapperBuilder) {\n  const stmts: o.Statement[] = [];\n  const methodParams: o.FnParam[] = [\n    new o.FnParam(\n        VIEW_VAR.name, o.importType(resolveIdentifier(Identifiers.AppView), [o.DYNAMIC_TYPE])),\n    new o.FnParam(RENDER_EL_VAR.name, o.DYNAMIC_TYPE),\n    new o.FnParam(THROW_ON_CHANGE_VAR.name, o.BOOL_TYPE),\n  ];\n  hostProps.forEach((hostProp) => {\n    const field = createCheckBindingField(builder);\n    const evalResult = convertPropertyBinding(\n        builder, null, o.THIS_EXPR.prop(CONTEXT_FIELD_NAME), hostProp.value, field.bindingId);\n    if (!evalResult) {\n      return;\n    }\n    let securityContextExpr: o.ReadVarExpr;\n    if (hostProp.needsRuntimeSecurityContext) {\n      securityContextExpr = o.variable(`secCtx_${methodParams.length}`);\n      methodParams.push(new o.FnParam(\n          securityContextExpr.name, o.importType(resolveIdentifier(Identifiers.SecurityContext))));\n    }\n    stmts.push(...createCheckBindingStmt(\n        evalResult, field.expression, THROW_ON_CHANGE_VAR,\n        writeToRenderer(\n            VIEW_VAR, hostProp, RENDER_EL_VAR, evalResult.currValExpr,\n            builder.compilerConfig.logBindingUpdate, securityContextExpr)));\n  });\n  builder.methods.push(new o.ClassMethod('detectChangesInHostProps', methodParams, stmts));\n}\n\nclass ParseResult {\n  constructor(\n      public hostProps: BoundElementPropertyAst[], public hostListeners: BoundEventAst[],\n      public errors: ParseError[]) {}\n}\n\nfunction parseHostBindings(\n    dirMeta: CompileDirectiveMetadata, exprParser: Parser,\n    schemaRegistry: ElementSchemaRegistry): ParseResult {\n  const errors: ParseError[] = [];\n  const parser =\n      new BindingParser(exprParser, DEFAULT_INTERPOLATION_CONFIG, schemaRegistry, [], errors);\n  const sourceFileName = dirMeta.type.moduleUrl ?\n      `in Directive ${dirMeta.type.name} in ${dirMeta.type.moduleUrl}` :\n      `in Directive ${dirMeta.type.name}`;\n  const sourceFile = new ParseSourceFile('', sourceFileName);\n  const sourceSpan = new ParseSourceSpan(\n      new ParseLocation(sourceFile, null, null, null),\n      new ParseLocation(sourceFile, null, null, null));\n  const parsedHostProps = parser.createDirectiveHostPropertyAsts(dirMeta, sourceSpan);\n  const parsedHostListeners = parser.createDirectiveHostEventAsts(dirMeta, sourceSpan);\n\n  return new ParseResult(parsedHostProps, parsedHostListeners, errors);\n}\n\nfunction reportParseErrors(parseErrors: ParseError[], console: Console) {\n  const warnings = parseErrors.filter(error => error.level === ParseErrorLevel.WARNING);\n  const errors = parseErrors.filter(error => error.level === ParseErrorLevel.FATAL);\n\n  if (warnings.length > 0) {\n    this._console.warn(`Directive parse warnings:\\n${warnings.join('\\n')}`);\n  }\n\n  if (errors.length > 0) {\n    throw new Error(`Directive parse errors:\\n${errors.join('\\n')}`);\n  }\n}\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}