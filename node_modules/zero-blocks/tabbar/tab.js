"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var core_1 = require('@angular/core');
var common_1 = require("@angular/common");
var TabBar = (function () {
    function TabBar(_element) {
        this._element = _element;
        this._maxNumberTabsDisplayed = 5;
        this._itemStyle = "ig-tab-bar-inner";
        this.tabs = [];
        this.alignment = "top";
        this.selectTab = new core_1.EventEmitter();
    }
    Object.defineProperty(TabBar.prototype, "_visibleTabs", {
        get: function () {
            var _this = this;
            return this.tabs.length > this._maxNumberTabsDisplayed ? this.tabs.filter(function (tab) { return tab.index < _this._maxNumberTabsDisplayed - 1; }) : this.tabs;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TabBar.prototype, "_height", {
        get: function () {
            return this._element.nativeElement.offsetHeight;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TabBar.prototype, "_columns", {
        get: function () {
            return this.tabs.length > this._maxNumberTabsDisplayed ? this._maxNumberTabsDisplayed : this.tabs.length;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TabBar.prototype, "tabListHeight", {
        get: function () {
            if (this._tabList) {
                return this._tabList.nativeElement.offsetHeight;
            }
            return 0;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TabBar.prototype, "selectedTab", {
        get: function () {
            var selectedTabs = this.tabs.filter(function (tab) { return tab.isSelected; });
            if (selectedTabs.length == 0) {
                return undefined;
            }
            else {
                return selectedTabs[selectedTabs.length - 1];
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TabBar.prototype, "selectedIndex", {
        get: function () {
            if (this.selectedTab) {
                return this.selectedTab.index;
            }
            return undefined;
        },
        enumerable: true,
        configurable: true
    });
    TabBar.prototype.ngAfterContentInit = function () {
        // initial selection
        if (!this.selectedTab) {
            var selectableTabs = this.tabs.filter(function (tab) { return !tab.isDisabled; }), tab = selectableTabs[0];
            if (tab) {
                this.select(tab.index);
            }
        }
    };
    TabBar.prototype.ngAfterViewInit = function () {
        var self = this;
        this.tabs.forEach(function (tab) {
            var tabListHeight = self.tabListHeight;
            tab.height = self._height - tabListHeight;
            if (self.alignment == "top") {
                tab.marginTop = tabListHeight;
            }
            else if (self.alignment == "bottom") {
                tab.marginTop = 0;
            }
        });
    };
    TabBar.prototype.add = function (tab) {
        var _this = this;
        this.tabs.push(tab);
        this.tabs.forEach(function (tab) { tab.columnCount = _this._columns; });
    };
    TabBar.prototype.remove = function (index) {
        var tab;
        if (!this._validateTabIndex(index)) {
            return;
        }
        tab = this.tabs[index];
        if (tab.isSelected) {
            tab.isSelected = false;
        }
        this.tabs.splice(index, 1);
    };
    TabBar.prototype.select = function (index) {
        var tab, self = this;
        if (!this._validateTabIndex(index)) {
            return;
        }
        tab = this.tabs[index];
        if (tab.isDisabled) {
            return;
        }
        this.tabs.forEach(function (tab) {
            if (tab.index != index) {
                self.deselect(tab.index);
            }
        });
        tab.isSelected = true;
        this.selectTab.emit({ index: index, tab: tab });
    };
    TabBar.prototype.deselect = function (index) {
        var tab;
        if (!this._validateTabIndex(index)) {
            return;
        }
        tab = this.tabs[index];
        if (!tab.isDisabled && tab.isSelected) {
            tab.isSelected = false;
        }
    };
    TabBar.prototype._selectTabMore = function () {
        alert("Tab More is clicked");
    };
    TabBar.prototype._validateTabIndex = function (index) {
        return index <= this.tabs.length - 1 && index >= 0;
    };
    __decorate([
        core_1.ViewChild('unorderedList'), 
        __metadata('design:type', core_1.ElementRef)
    ], TabBar.prototype, "_tabList", void 0);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', String)
    ], TabBar.prototype, "alignment", void 0);
    __decorate([
        core_1.Output(), 
        __metadata('design:type', Object)
    ], TabBar.prototype, "selectTab", void 0);
    TabBar = __decorate([
        core_1.Component({
            selector: 'ig-tab-bar',
            moduleId: module.id,
            template: "\n      <div class=\"{{_itemStyle}}\">\n      \t<ng-content></ng-content>\n      \t<ul #unorderedList class=\"{{_itemStyle}}__menu {{_itemStyle}}__menu--{{alignment}}\">\n      \t\t<li *ngFor=\"let tab of _visibleTabs\" class=\"{{_itemStyle}}__menu-item\" [class.ig-tab-bar-inner__menu-item--selected]=\"tab.isSelected\" [class.ig-tab-bar-inner__menu-item--disabled]=\"tab.isDisabled\" (click)=\"tab.select()\" >\n      \t\t\t<div ngClass=\"tab-icon\">\n      \t\t\t\t<i class=\"material-icons\">{{tab.icon}}</i>\n      \t\t\t\t<span [class.ig-badge--hidden]=\"tab._changesCount == 0\" class=\"ig-badge\">{{tab._changesCount}}</span>\n      \t\t\t</div>\n      \t\t\t<div ngClass=\"tab-label\">{{tab.label}}</div>\n      \t\t\t<div ngClass=\"tab-color tab-color--{{tab.color}}\"></div>\n      \t\t</li>\n      \t\t<li class=\"{{_itemStyle}}__menu-item\" *ngIf=\"tabs.length > 5\" (click)=\"_selectTabMore()\">\n      \t\t\t<div ngClass=\"tab-icon\">\n      \t\t\t\t<i class=\"material-icons\">more_horiz</i>\n      \t\t\t\t <!--<span [class.hidden]=\"tab._changesCount == 0\" class=\"badge\">{{tab._changesCount}}</span> -->\n      \t\t\t</div>\n      \t\t\t<div ngClass=\"tab-label\">More</div>\n      \t\t</li>\n      \t</ul>\n      </div>\n    "
        }), 
        __metadata('design:paramtypes', [core_1.ElementRef])
    ], TabBar);
    return TabBar;
}());
exports.TabBar = TabBar;
var Tab = (function () {
    function Tab(_tabBar, _element) {
        this._tabBar = _tabBar;
        this._element = _element;
        this._itemStyle = "ig-tab-inner";
        this._changesCount = 0; // changes and updates accordingly applied to the tab.
        this.isSelected = false;
        // Indirectly defines the width of the tab.
        this.columnCount = 0;
        this._tabBar.add(this);
    }
    Object.defineProperty(Tab.prototype, "index", {
        get: function () {
            return this._tabBar.tabs.indexOf(this);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Tab.prototype, "isDisabled", {
        get: function () {
            return this.disabled !== undefined;
        },
        set: function (value) {
            this.disabled = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Tab.prototype, "height", {
        get: function () {
            return this.wrapper.nativeElement.style.height;
        },
        set: function (value) {
            this.wrapper.nativeElement.style.height = value + "px";
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Tab.prototype, "marginTop", {
        get: function () {
            return this.wrapper.nativeElement.style.marginTop;
        },
        set: function (value) {
            this.wrapper.nativeElement.style.marginTop = value + "px";
        },
        enumerable: true,
        configurable: true
    });
    Tab.prototype.select = function () {
        if (this.href) {
        }
        this._tabBar.select(this.index);
    };
    Tab.prototype.deselect = function () {
        this._tabBar.deselect(this.index);
    };
    __decorate([
        core_1.ViewChild('wrapper'), 
        __metadata('design:type', core_1.ElementRef)
    ], Tab.prototype, "wrapper", void 0);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', String)
    ], Tab.prototype, "label", void 0);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', String)
    ], Tab.prototype, "icon", void 0);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', Boolean)
    ], Tab.prototype, "disabled", void 0);
    __decorate([
        core_1.Input(), 
        __metadata('design:type', String)
    ], Tab.prototype, "href", void 0);
    __decorate([
        // TODO - need to be disccussed
        core_1.Input(), 
        __metadata('design:type', String)
    ], Tab.prototype, "color", void 0);
    Tab = __decorate([
        core_1.Component({
            selector: 'ig-tab',
            moduleId: module.id,
            template: "\n      <div #wrapper class=\"{{_itemStyle}}\" [class.selected]=\"isSelected\" >\n      \t<ng-content></ng-content>\n      </div>\n    ",
            host: {
                '[class]': '"col-" + columnCount'
            }
        }), 
        __metadata('design:paramtypes', [TabBar, core_1.ElementRef])
    ], Tab);
    return Tab;
}());
exports.Tab = Tab;
var TabBarModule = (function () {
    function TabBarModule() {
    }
    TabBarModule = __decorate([
        core_1.NgModule({
            declarations: [TabBar, Tab],
            imports: [common_1.CommonModule],
            exports: [TabBar, Tab]
        }), 
        __metadata('design:paramtypes', [])
    ], TabBarModule);
    return TabBarModule;
}());
exports.TabBarModule = TabBarModule;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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QUFDLENBQUM7SUFDcEMsQ0FBQztJQUVELHNCQUFRLEdBQVI7UUFDSSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEMsQ0FBQztJQTFERDtRQUFDLGdCQUFTLENBQUMsU0FBUyxDQUFDOzt3Q0FBQTtJQXNDckI7UUFBQyxZQUFLLEVBQUU7O3NDQUFBO0lBQ1I7UUFBQyxZQUFLLEVBQUU7O3FDQUFBO0lBQ1I7UUFBQyxZQUFLLEVBQUU7O3lDQUFBO0lBQ1I7UUFBQyxZQUFLLEVBQUU7O3FDQUFBO0lBQ1I7UUFEeUIsK0JBQStCO1FBQ3ZELFlBQUssRUFBRTs7c0NBQUE7SUF4RFo7UUFBQyxnQkFBUyxDQUFDO1lBQ1AsUUFBUSxFQUFFLFFBQVE7WUFDbEIsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1lBQ25CLFFBQVEsRUFBRSx5SUFJVDtZQUNELElBQUksRUFBRTtnQkFDRixTQUFTLEVBQUUsc0JBQXNCO2FBQ3BDO1NBQ0osQ0FBQzs7V0FBQTtJQThERixVQUFDO0FBQUQsQ0E1REEsQUE0REMsSUFBQTtBQTVEWSxXQUFHLE1BNERmLENBQUE7QUFPRDtJQUFBO0lBQ0EsQ0FBQztJQU5EO1FBQUMsZUFBUSxDQUFDO1lBQ04sWUFBWSxFQUFFLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQztZQUMzQixPQUFPLEVBQUUsQ0FBQyxxQkFBWSxDQUFDO1lBQ3ZCLE9BQU8sRUFBRSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7U0FDekIsQ0FBQzs7b0JBQUE7SUFFRixtQkFBQztBQUFELENBREEsQUFDQyxJQUFBO0FBRFksb0JBQVksZUFDeEIsQ0FBQSIsImZpbGUiOiJ0YWJiYXIvdGFiLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFbGVtZW50UmVmLCBWaWV3Q2hpbGQsIEFmdGVyVmlld0luaXQsIEFmdGVyQ29udGVudEluaXQsIEV2ZW50RW1pdHRlciwgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gXCJAYW5ndWxhci9jb21tb25cIjtcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdpZy10YWItYmFyJyxcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLCAvLyBjb21tb25KUyBzdGFuZGFyZFxuICAgIHRlbXBsYXRlOiBgXG4gICAgICA8ZGl2IGNsYXNzPVwie3tfaXRlbVN0eWxlfX1cIj5cbiAgICAgIFx0PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgXHQ8dWwgI3Vub3JkZXJlZExpc3QgY2xhc3M9XCJ7e19pdGVtU3R5bGV9fV9fbWVudSB7e19pdGVtU3R5bGV9fV9fbWVudS0te3thbGlnbm1lbnR9fVwiPlxuICAgICAgXHRcdDxsaSAqbmdGb3I9XCJsZXQgdGFiIG9mIF92aXNpYmxlVGFic1wiIGNsYXNzPVwie3tfaXRlbVN0eWxlfX1fX21lbnUtaXRlbVwiIFtjbGFzcy5pZy10YWItYmFyLWlubmVyX19tZW51LWl0ZW0tLXNlbGVjdGVkXT1cInRhYi5pc1NlbGVjdGVkXCIgW2NsYXNzLmlnLXRhYi1iYXItaW5uZXJfX21lbnUtaXRlbS0tZGlzYWJsZWRdPVwidGFiLmlzRGlzYWJsZWRcIiAoY2xpY2spPVwidGFiLnNlbGVjdCgpXCIgPlxuICAgICAgXHRcdFx0PGRpdiBuZ0NsYXNzPVwidGFiLWljb25cIj5cbiAgICAgIFx0XHRcdFx0PGkgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPnt7dGFiLmljb259fTwvaT5cbiAgICAgIFx0XHRcdFx0PHNwYW4gW2NsYXNzLmlnLWJhZGdlLS1oaWRkZW5dPVwidGFiLl9jaGFuZ2VzQ291bnQgPT0gMFwiIGNsYXNzPVwiaWctYmFkZ2VcIj57e3RhYi5fY2hhbmdlc0NvdW50fX08L3NwYW4+XG4gICAgICBcdFx0XHQ8L2Rpdj5cbiAgICAgIFx0XHRcdDxkaXYgbmdDbGFzcz1cInRhYi1sYWJlbFwiPnt7dGFiLmxhYmVsfX08L2Rpdj5cbiAgICAgIFx0XHRcdDxkaXYgbmdDbGFzcz1cInRhYi1jb2xvciB0YWItY29sb3ItLXt7dGFiLmNvbG9yfX1cIj48L2Rpdj5cbiAgICAgIFx0XHQ8L2xpPlxuICAgICAgXHRcdDxsaSBjbGFzcz1cInt7X2l0ZW1TdHlsZX19X19tZW51LWl0ZW1cIiAqbmdJZj1cInRhYnMubGVuZ3RoID4gNVwiIChjbGljayk9XCJfc2VsZWN0VGFiTW9yZSgpXCI+XG4gICAgICBcdFx0XHQ8ZGl2IG5nQ2xhc3M9XCJ0YWItaWNvblwiPlxuICAgICAgXHRcdFx0XHQ8aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+bW9yZV9ob3JpejwvaT5cbiAgICAgIFx0XHRcdFx0IDwhLS08c3BhbiBbY2xhc3MuaGlkZGVuXT1cInRhYi5fY2hhbmdlc0NvdW50ID09IDBcIiBjbGFzcz1cImJhZGdlXCI+e3t0YWIuX2NoYW5nZXNDb3VudH19PC9zcGFuPiAtLT5cbiAgICAgIFx0XHRcdDwvZGl2PlxuICAgICAgXHRcdFx0PGRpdiBuZ0NsYXNzPVwidGFiLWxhYmVsXCI+TW9yZTwvZGl2PlxuICAgICAgXHRcdDwvbGk+XG4gICAgICBcdDwvdWw+XG4gICAgICA8L2Rpdj5cbiAgICBgXG59KVxuXG5leHBvcnQgY2xhc3MgVGFiQmFyIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJDb250ZW50SW5pdCB7XG4gICAgQFZpZXdDaGlsZCgndW5vcmRlcmVkTGlzdCcpIF90YWJMaXN0OiBFbGVtZW50UmVmO1xuXG4gICAgcHJpdmF0ZSBfbWF4TnVtYmVyVGFic0Rpc3BsYXllZDogbnVtYmVyID0gNTtcbiAgICBwcml2YXRlIF9pdGVtU3R5bGU6IHN0cmluZyA9IFwiaWctdGFiLWJhci1pbm5lclwiO1xuICAgIHByaXZhdGUgZ2V0IF92aXNpYmxlVGFicygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFicy5sZW5ndGggPiB0aGlzLl9tYXhOdW1iZXJUYWJzRGlzcGxheWVkID8gdGhpcy50YWJzLmZpbHRlcih0YWIgPT4gdGFiLmluZGV4IDwgdGhpcy5fbWF4TnVtYmVyVGFic0Rpc3BsYXllZCAtIDEpIDogdGhpcy50YWJzO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IF9oZWlnaHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0IF9jb2x1bW5zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YWJzLmxlbmd0aCA+IHRoaXMuX21heE51bWJlclRhYnNEaXNwbGF5ZWQgPyB0aGlzLl9tYXhOdW1iZXJUYWJzRGlzcGxheWVkIDogdGhpcy50YWJzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBnZXQgdGFiTGlzdEhlaWdodCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RhYkxpc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90YWJMaXN0Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgdGFiczogVGFiW10gPSBbXTtcblxuICAgIGdldCBzZWxlY3RlZFRhYigpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkVGFicyA9IHRoaXMudGFicy5maWx0ZXIoKHRhYikgPT4gdGFiLmlzU2VsZWN0ZWQpO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZFRhYnMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRUYWJzW3NlbGVjdGVkVGFicy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBzZWxlY3RlZEluZGV4KCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFRhYikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRUYWIuaW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIEBJbnB1dCgpIGFsaWdubWVudDogc3RyaW5nID0gXCJ0b3BcIjtcblxuICAgIEBPdXRwdXQoKSBzZWxlY3RUYWIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9lbGVtZW50OiBFbGVtZW50UmVmKSB7XG4gICAgfVxuXG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgICAgICAvLyBpbml0aWFsIHNlbGVjdGlvblxuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRUYWIpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RhYmxlVGFicyA9IHRoaXMudGFicy5maWx0ZXIoKHRhYikgPT4gIXRhYi5pc0Rpc2FibGVkKSxcbiAgICAgICAgICAgICAgICB0YWIgPSBzZWxlY3RhYmxlVGFic1swXTtcblxuICAgICAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHRhYi5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLnRhYnMuZm9yRWFjaCgodGFiKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGFiTGlzdEhlaWdodCA9IHNlbGYudGFiTGlzdEhlaWdodDtcbiAgICAgICAgICAgIHRhYi5oZWlnaHQgPSBzZWxmLl9oZWlnaHQgLSB0YWJMaXN0SGVpZ2h0O1xuICAgICAgICAgICAgaWYgKHNlbGYuYWxpZ25tZW50ID09IFwidG9wXCIpIHtcbiAgICAgICAgICAgICAgICB0YWIubWFyZ2luVG9wID0gdGFiTGlzdEhlaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VsZi5hbGlnbm1lbnQgPT0gXCJib3R0b21cIikge1xuICAgICAgICAgICAgICAgIHRhYi5tYXJnaW5Ub3AgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGQodGFiOiBUYWIpIHtcbiAgICAgICAgdGhpcy50YWJzLnB1c2godGFiKTtcbiAgICAgICAgdGhpcy50YWJzLmZvckVhY2goKHRhYikgPT4geyB0YWIuY29sdW1uQ291bnQgPSB0aGlzLl9jb2x1bW5zOyB9KTtcbiAgICB9XG5cbiAgICByZW1vdmUoaW5kZXg6IG51bWJlcikge1xuICAgICAgICB2YXIgdGFiO1xuXG4gICAgICAgIGlmICghdGhpcy5fdmFsaWRhdGVUYWJJbmRleChpbmRleCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRhYiA9IHRoaXMudGFic1tpbmRleF07XG5cbiAgICAgICAgaWYgKHRhYi5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICB0YWIuaXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50YWJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuXG4gICAgc2VsZWN0KGluZGV4OiBudW1iZXIpIHtcbiAgICAgICAgdmFyIHRhYiwgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZVRhYkluZGV4KGluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFiID0gdGhpcy50YWJzW2luZGV4XTtcblxuICAgICAgICBpZiAodGFiLmlzRGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGFicy5mb3JFYWNoKCh0YWIpID0+IHtcbiAgICAgICAgICAgIGlmICh0YWIuaW5kZXggIT0gaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmRlc2VsZWN0KHRhYi5pbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRhYi5pc1NlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLnNlbGVjdFRhYi5lbWl0KHsgaW5kZXg6IGluZGV4LCB0YWI6IHRhYiB9KTtcbiAgICB9XG5cbiAgICBkZXNlbGVjdChpbmRleDogbnVtYmVyKSB7XG4gICAgICAgIHZhciB0YWI7XG5cbiAgICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZVRhYkluZGV4KGluZGV4KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFiID0gdGhpcy50YWJzW2luZGV4XTtcblxuICAgICAgICBpZiAoIXRhYi5pc0Rpc2FibGVkICYmIHRhYi5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgICB0YWIuaXNTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfc2VsZWN0VGFiTW9yZSgpIHtcbiAgICAgICAgYWxlcnQoXCJUYWIgTW9yZSBpcyBjbGlja2VkXCIpO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3ZhbGlkYXRlVGFiSW5kZXgoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4IDw9IHRoaXMudGFicy5sZW5ndGggLSAxICYmIGluZGV4ID49IDA7XG4gICAgfVxufVxuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2lnLXRhYicsXG4gICAgbW9kdWxlSWQ6IG1vZHVsZS5pZCwgLy8gY29tbW9uSlMgc3RhbmRhcmRcbiAgICB0ZW1wbGF0ZTogYFxuICAgICAgPGRpdiAjd3JhcHBlciBjbGFzcz1cInt7X2l0ZW1TdHlsZX19XCIgW2NsYXNzLnNlbGVjdGVkXT1cImlzU2VsZWN0ZWRcIiA+XG4gICAgICBcdDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgIDwvZGl2PlxuICAgIGAsXG4gICAgaG9zdDoge1xuICAgICAgICAnW2NsYXNzXSc6ICdcImNvbC1cIiArIGNvbHVtbkNvdW50J1xuICAgIH1cbn0pXG5cbmV4cG9ydCBjbGFzcyBUYWIge1xuICAgIEBWaWV3Q2hpbGQoJ3dyYXBwZXInKSB3cmFwcGVyOiBFbGVtZW50UmVmO1xuXG4gICAgcHJpdmF0ZSBfaXRlbVN0eWxlOiBzdHJpbmcgPSBcImlnLXRhYi1pbm5lclwiO1xuICAgIHByaXZhdGUgX2NoYW5nZXNDb3VudDogbnVtYmVyID0gMDsgLy8gY2hhbmdlcyBhbmQgdXBkYXRlcyBhY2NvcmRpbmdseSBhcHBsaWVkIHRvIHRoZSB0YWIuXG5cbiAgICBpc1NlbGVjdGVkOiBib29sZWFuID0gZmFsc2U7XG4gICAgXG4gICAgZ2V0IGluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFiQmFyLnRhYnMuaW5kZXhPZih0aGlzKTtcbiAgICB9XG5cbiAgICBnZXQgaXNEaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBzZXQgaXNEaXNhYmxlZCh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZ2V0IGhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodDtcbiAgICB9XG5cbiAgICBzZXQgaGVpZ2h0KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdmFsdWUgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgZ2V0IG1hcmdpblRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcHBlci5uYXRpdmVFbGVtZW50LnN0eWxlLm1hcmdpblRvcDtcbiAgICB9XG5cbiAgICBzZXQgbWFyZ2luVG9wKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy53cmFwcGVyLm5hdGl2ZUVsZW1lbnQuc3R5bGUubWFyZ2luVG9wID0gdmFsdWUgKyBcInB4XCI7XG4gICAgfVxuXG4gICAgLy8gSW5kaXJlY3RseSBkZWZpbmVzIHRoZSB3aWR0aCBvZiB0aGUgdGFiLlxuICAgIGNvbHVtbkNvdW50OiBudW1iZXIgPSAwO1xuXG4gICAgQElucHV0KCkgbGFiZWw6IHN0cmluZztcbiAgICBASW5wdXQoKSBpY29uOiBzdHJpbmc7XG4gICAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW47XG4gICAgQElucHV0KCkgaHJlZjogc3RyaW5nOyAgIC8vIFRPRE8gLSBuZWVkIHRvIGJlIGRpc2NjdXNzZWRcbiAgICBASW5wdXQoKSBjb2xvcjogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBfdGFiQmFyOiBUYWJCYXIsIHByaXZhdGUgX2VsZW1lbnQ6IEVsZW1lbnRSZWYpIHtcbiAgICAgICAgdGhpcy5fdGFiQmFyLmFkZCh0aGlzKTtcbiAgICB9XG5cbiAgICBzZWxlY3QoKSB7XG4gICAgICAgIGlmICh0aGlzLmhyZWYpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gLSBocmVmIGltcGxlbWVudGF0aW9uLiBQcmlvcml0eSBvdmVyIG5lc3RlZCBjb250ZW50XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90YWJCYXIuc2VsZWN0KHRoaXMuaW5kZXgpO1xuICAgIH1cblxuICAgIGRlc2VsZWN0KCkge1xuICAgICAgICB0aGlzLl90YWJCYXIuZGVzZWxlY3QodGhpcy5pbmRleCk7XG4gICAgfVxufVxuXG5ATmdNb2R1bGUoe1xuICAgIGRlY2xhcmF0aW9uczogW1RhYkJhciwgVGFiXSxcbiAgICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXSxcbiAgICBleHBvcnRzOiBbVGFiQmFyLCBUYWJdXG59KVxuZXhwb3J0IGNsYXNzIFRhYkJhck1vZHVsZSB7XG59Il19
